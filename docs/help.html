<!DOCTYPE html>
<html lang="ja">
<head>
  <!-- v287: ヘルプページ新規作成 -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ヘルプ - フリラ</title>
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <link rel="stylesheet" href="/css/reborn-brand-colors.css?v=9635">
  <link rel="stylesheet" href="/css/reborn-theme.css?v=9635">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: #f5f5f5;
      min-height: 100vh;
      padding-bottom: 80px;
    }

    .help-header {
      background: linear-gradient(135deg, var(--reborn-primary, #40B4E5) 0%, var(--reborn-primary-dark, #1E8FBF) 100%);
      padding: 24px 20px;
      color: white;
      text-align: center;
    }

    .help-header h1 {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .help-header p {
      font-size: 14px;
      opacity: 0.9;
    }

    .help-container {
      padding: 20px;
      max-width: 600px;
      margin: 0 auto;
    }

    .help-section {
      background: white;
      border-radius: 12px;
      margin-bottom: 16px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      overflow: hidden;
    }

    .help-section-title {
      font-size: 14px;
      font-weight: 600;
      color: #6b7280;
      padding: 12px 16px 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .help-item {
      display: flex;
      align-items: center;
      padding: 14px 16px;
      border-bottom: 1px solid #f3f4f6;
      cursor: pointer;
      transition: background 0.2s;
      text-decoration: none;
      color: inherit;
    }

    .help-item:last-child {
      border-bottom: none;
    }

    .help-item:active {
      background: #f9fafb;
    }

    .help-item-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background: var(--reborn-primary-lightest, #E8F7FC);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .help-item-icon i {
      font-size: 20px;
      color: var(--reborn-primary, #40B4E5);
    }

    .help-item-content {
      flex: 1;
    }

    .help-item-title {
      font-size: 15px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 2px;
    }

    .help-item-desc {
      font-size: 13px;
      color: #6b7280;
    }

    .help-item-arrow {
      color: #9ca3af;
      font-size: 18px;
    }

    /* FAQ アコーディオン */
    .faq-item {
      border-bottom: 1px solid #f3f4f6;
    }

    .faq-item:last-child {
      border-bottom: none;
    }

    .faq-question {
      display: flex;
      align-items: center;
      padding: 14px 16px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .faq-question:active {
      background: #f9fafb;
    }

    .faq-question-icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--reborn-primary, #40B4E5);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 700;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .faq-question-text {
      flex: 1;
      font-size: 14px;
      font-weight: 600;
      color: #1f2937;
    }

    .faq-toggle {
      color: #9ca3af;
      font-size: 18px;
      transition: transform 0.3s;
    }

    .faq-item.open .faq-toggle {
      transform: rotate(180deg);
    }

    .faq-answer {
      display: none;
      padding: 0 16px 14px 56px;
      font-size: 14px;
      color: #4b5563;
      line-height: 1.6;
    }

    .faq-item.open .faq-answer {
      display: block;
    }

    /* フッター */
    .help-footer {
      padding: 24px 20px;
      text-align: center;
    }

    .help-footer-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 12px;
    }

    .help-footer-links a {
      color: #6b7280;
      font-size: 13px;
      text-decoration: none;
    }

    .help-footer-links a:hover {
      color: var(--reborn-primary);
      text-decoration: underline;
    }

    .help-footer-copyright {
      color: #9ca3af;
      font-size: 12px;
    }

    /* 戻るボタン */
    .back-button {
      position: absolute;
      top: 20px;
      left: 16px;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      font-size: 20px;
    }

    .back-button:active {
      background: rgba(255, 255, 255, 0.3);
    }

    .help-header {
      position: relative;
    }
  </style>
</head>
<body>
  <div class="help-header">
    <button class="back-button" onclick="goBack()" title="戻る">
      <i class="bi bi-chevron-left"></i>
    </button>
    <h1>ヘルプ</h1>
    <p>お困りの際はこちらをご確認ください</p>
  </div>

  <div class="help-container">
    <!-- よくある質問 -->
    <div class="help-section">
      <div class="help-section-title">よくある質問</div>

      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-question">
          <span class="faq-question-icon">Q</span>
          <span class="faq-question-text">商品を登録するにはどうすればいいですか？</span>
          <i class="bi bi-chevron-down faq-toggle"></i>
        </div>
        <div class="faq-answer">
          画面下部の「登録」ボタンをタップするか、メニューから「商品登録」を選択してください。カメラで商品を撮影し、必要な情報を入力して保存できます。
        </div>
      </div>

      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-question">
          <span class="faq-question-icon">Q</span>
          <span class="faq-question-text">チャットで通知が届きません</span>
          <i class="bi bi-chevron-down faq-toggle"></i>
        </div>
        <div class="faq-answer">
          1. 端末の通知設定でフリラの通知が許可されているか確認してください。<br>
          2. マイページ→基本設定から通知設定を確認してください。<br>
          3. アプリを再起動してみてください。
        </div>
      </div>

      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-question">
          <span class="faq-question-icon">Q</span>
          <span class="faq-question-text">データはどこに保存されますか？</span>
          <i class="bi bi-chevron-down faq-toggle"></i>
        </div>
        <div class="faq-answer">
          データはクラウド（Firestore）に安全に保存されます。インターネット接続があれば、どの端末からでもアクセスできます。
        </div>
      </div>

      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-question">
          <span class="faq-question-icon">Q</span>
          <span class="faq-question-text">アプリをアップデートするには？</span>
          <i class="bi bi-chevron-down faq-toggle"></i>
        </div>
        <div class="faq-answer">
          フリラはPWA（Progressive Web App）のため、自動的に最新版に更新されます。更新が反映されない場合は、アプリを完全に終了してから再度開いてください。
        </div>
      </div>
    </div>

    <!-- 操作ガイド -->
    <div class="help-section">
      <div class="help-section-title">操作ガイド</div>

      <a class="help-item" href="#" onclick="showGuide('product'); return false;">
        <div class="help-item-icon">
          <i class="bi bi-camera"></i>
        </div>
        <div class="help-item-content">
          <div class="help-item-title">商品登録の使い方</div>
          <div class="help-item-desc">写真撮影から登録完了まで</div>
        </div>
        <i class="bi bi-chevron-right help-item-arrow"></i>
      </a>

      <a class="help-item" href="#" onclick="showGuide('inventory'); return false;">
        <div class="help-item-icon">
          <i class="bi bi-box-seam"></i>
        </div>
        <div class="help-item-content">
          <div class="help-item-title">在庫管理の使い方</div>
          <div class="help-item-desc">在庫確認・ステータス変更</div>
        </div>
        <i class="bi bi-chevron-right help-item-arrow"></i>
      </a>

      <a class="help-item" href="#" onclick="showGuide('chat'); return false;">
        <div class="help-item-icon">
          <i class="bi bi-chat"></i>
        </div>
        <div class="help-item-content">
          <div class="help-item-title">チャットの使い方</div>
          <div class="help-item-desc">チーム連絡・通知設定</div>
        </div>
        <i class="bi bi-chevron-right help-item-arrow"></i>
      </a>
    </div>

    <!-- お問い合わせ -->
    <div class="help-section">
      <div class="help-section-title">サポート</div>

      <a class="help-item" href="mailto:support@furira.jp">
        <div class="help-item-icon">
          <i class="bi bi-envelope"></i>
        </div>
        <div class="help-item-content">
          <div class="help-item-title">メールでお問い合わせ</div>
          <div class="help-item-desc">support@furira.jp</div>
        </div>
        <i class="bi bi-chevron-right help-item-arrow"></i>
      </a>
    </div>

    <!-- アプリ情報 -->
    <div class="help-section">
      <div class="help-section-title">アプリ情報</div>

      <div class="help-item" style="cursor: default;">
        <div class="help-item-icon">
          <i class="bi bi-info-circle"></i>
        </div>
        <div class="help-item-content">
          <div class="help-item-title">バージョン</div>
          <div class="help-item-desc" id="app-version">v287</div>
        </div>
      </div>
    </div>
  </div>

  <!-- フッター -->
  <div class="help-footer">
    <div class="help-footer-links">
      <a href="/privacy-policy.html" target="_blank">プライバシーポリシー</a>
      <a href="/terms-of-service.html" target="_blank">利用規約</a>
    </div>
    <div class="help-footer-copyright">&copy; 2025 フリラ</div>
  </div>

  <script>
    // FAQアコーディオン
    function toggleFaq(element) {
      // 他のFAQを閉じる
      document.querySelectorAll('.faq-item.open').forEach(item => {
        if (item !== element) {
          item.classList.remove('open');
        }
      });
      // クリックしたFAQをトグル
      element.classList.toggle('open');
    }

    // 操作ガイド表示（将来の拡張用）
    function showGuide(type) {
      // TODO: 詳細ガイドページへの遷移または モーダル表示
      alert('「' + type + '」のガイドは準備中です。');
    }

    // 戻るボタン
    function goBack() {
      // 親フレームに戻りリクエストを送信
      if (window.parent && window.parent !== window) {
        window.parent.postMessage({ type: 'requestBack' }, '*');
      } else {
        window.history.back();
      }
    }
  </script>
</body>
</html>
