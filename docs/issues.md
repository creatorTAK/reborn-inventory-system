# Issues（未完了）

このファイルは、REBORN Inventoryプロジェクトの**未完了Issue**を管理します。

**運用ルール：**
- 新しいIssueは該当カテゴリの最上部に追加
- 完了したIssue（✅ DONE）は `issues-closed.md` に移動
- 定期的にレビュー（週1回推奨）

**関連ドキュメント：**
- [TDD_POLICY.md](./TDD_POLICY.md) - Issue管理ルール詳細
- [ISSUE_TEMPLATE.md](./ISSUE_TEMPLATE.md) - Issue起票テンプレート
- [issues-closed.md](./issues-closed.md) - 完了Issueアーカイブ

---

## 🐛 バグ修正（Bug Fixes）

**現在のバグ: 0件**

---

## ✨ 機能追加・改善（Features & Improvements）

### PERF-001 | パフォーマンス改善: 画像アップロード時間の短縮

#### 📌 基本情報
- [ ] カテゴリ: パフォーマンス改善
- [ ] 優先度: 高
- [ ] 影響範囲: 商品登録画面 - 画像アップロード
- [ ] 発見日: 2025-10-23

#### 💡 改善内容
スマホで撮影した画像8枚のアップロードに約40秒かかっている。実際の運用では10枚以上アップロードする予定のため、処理時間を短縮する必要がある。

**現状の問題:**
- 画像8枚で約40秒（1枚あたり約5秒）
- 10枚の場合: 約50秒
- スマホ撮影画像（高解像度）の転送が遅い

**目標:**
- 画像10枚で20秒以内（現状の半分以下）
- 1枚あたり2秒以内

#### ✅ 期待効果
- ユーザーの待ち時間を大幅に短縮
- 出品作業のストレス軽減
- 業務効率の向上

#### 📍 関連ファイル
- `sp_scripts.html` (handleProductImageUpload関数, 行2897-2952)
- `image_upload_r2.js` (uploadImagesToR2関数)
- `product.js` (saveProduct関数)

#### 🔍 改善案
- [x] **案1**: クライアント側で画像リサイズ（横幅800px、JPEG品質70%）← 採用
  - メリット: 転送データ量が大幅削減、実装が比較的簡単
  - デメリット: クライアント側の処理負荷がやや増加
- [ ] **案2**: 画像フォーマット最適化（WebP変換）
  - メリット: さらに高い圧縮率
  - デメリット: ブラウザ互換性の考慮が必要
- [ ] **案3**: 並列アップロード数の最適化
  - メリット: 複数画像を同時アップロード
  - デメリット: サーバー負荷とネットワーク帯域の考慮が必要

#### ✏️ 実装内容
- [x] 改善案の選定と詳細設計（案1を採用）
- [x] resizeImage関数の実装（sp_scripts.html, 行2911-2953）
- [x] handleProductImageUpload関数を非同期処理に変更（行3049-3070）
- [x] Canvas APIで横幅800px、JPEG品質70%にリサイズ
- [x] Gitコミット
- [x] clasp push
- [x] 手動デプロイ
- [ ] 本番環境でのパフォーマンステスト

#### 📝 テスト結果
- [ ] 画像8枚: ___秒（目標: 16秒以内）
- [ ] 画像10枚: ___秒（目標: 20秒以内）
- [ ] 画質確認: OK / NG
- [ ] デグレード確認: OK / NG

#### 状態
- [ ] ✅ DONE (完了日: )

---

**現在の機能追加・改善: 1件**

---

## 🔧 技術的負債・リファクタリング（Technical Debt）

**現在の技術的負債: 0件**

---

**総Issue数: 1件**
**最終更新: 2025-10-23**
