# Issues（未完了）

このファイルは、REBORN Inventoryプロジェクトの**未完了Issue**を管理します。

**運用ルール：**
- 新しいIssueは最上部に追加
- 完了したIssue（✅ DONE）は `issues-closed.md` に移動
- 定期的にレビュー（週1回推奨）

**関連ドキュメント：**
- [TDD_POLICY.md](./TDD_POLICY.md) - Issue管理ルール詳細
- [ISSUE_TEMPLATE.md](./ISSUE_TEMPLATE.md) - Issue起票テンプレート
- [issues-closed.md](./issues-closed.md) - 完了Issueアーカイブ

---

## RESET-004 | バグ: 配送方法・出品先のデフォルト値が消える

### 📌 基本情報
- [ ] カテゴリ: バグ修正
- [ ] 優先度: 中
- [ ] 影響範囲: リセット機能、価格・出品情報ブロック
- [ ] 発見日: 2025-10-21

### 🐛 不具合内容
リセットボタンをクリックすると、配送方法と出品先のデフォルト値まで消えてしまう。

**現状の動作：**
- 配送方法：空になる
- 出品先チェックボックス：全て外れる

**問題点：**
- ユーザーが毎回デフォルト値を再設定する必要がある
- `config.json` で設定したデフォルト値の意味がなくなる

### ✅ 期待動作
リセット時に、配送方法と出品先は `config.json` で設定されたデフォルト値に戻る。

**例：**
- 配送方法：「ゆうパック」（デフォルト値）
- 出品先：「メルカリ」と「ラクマ」にチェック（デフォルト値）

### 📍 関連ファイル
- `sp_scripts.html` (resetForm関数)
- `config.json` (デフォルト値定義)
- `config_loader.js` (デフォルト値読み込み)

### 🧪 テストケース

#### TC-RESET-004-001: デフォルト値復元テスト
**前提条件:**
- config.json で以下を設定済み
  - 配送方法デフォルト: 「ゆうパック」
  - 出品先デフォルト: 「メルカリ」「ラクマ」
- ユーザーが以下に変更済み
  - 配送方法: 「宅急便」
  - 出品先: 「メルカリ」のみチェック

**実行操作:**
1. リセットボタンをクリック

**期待結果:**
- 配送方法: 「ゆうパック」（デフォルト値に戻る）
- 出品先: 「メルカリ」「ラクマ」にチェック（デフォルト値に戻る）

#### TC-RESET-004-002: デグレードテスト（価格情報）
**前提条件:**
- 販売価格: 「50000」入力済み
- 原価: 「30000」入力済み

**実行操作:**
1. リセットボタンをクリック

**期待結果:**
- 販売価格: 空（正常にクリアされる）
- 原価: 空（正常にクリアされる）

### ✏️ 修正内容
- [ ] resetForm関数で配送方法をデフォルト値に設定する処理を追加
- [ ] resetForm関数で出品先をデフォルト値に設定する処理を追加
- [ ] config.jsonのデフォルト値を正しく読み込めることを確認
- [ ] TC-RESET-004-001実行
- [ ] TC-RESET-004-002実行（デグレード確認）

### 📝 テスト結果
- [ ] TC-RESET-004-001: PASS / FAIL
- [ ] TC-RESET-004-002: PASS / FAIL

### 状態
- [ ] ✅ DONE (完了日: )

---

## RESET-003 | バグ: 商品の説明プレビューが消えない

### 📌 基本情報
- [ ] カテゴリ: バグ修正
- [ ] 優先度: 中
- [ ] 影響範囲: リセット機能、商品説明ブロック
- [ ] 発見日: 2025-10-21

### 🐛 不具合内容
リセットボタンをクリックしても、商品の説明プレビューが表示されたままになる。

**現状の動作：**
- 商品の説明（入力欄）: 正常にクリアされる ✅
- 商品の説明プレビュー: クリアされない ❌

**問題点：**
- ユーザーが混乱する（入力欄は空なのにプレビューは表示されている）
- 次の商品登録時に前の説明が見えている

### ✅ 期待動作
リセット時に、商品の説明プレビューも空になる。

### 📍 関連ファイル
- `sp_scripts.html` (resetForm関数)
- `sp_block_description.html` (プレビュー表示ロジック)

### 🧪 テストケース

#### TC-RESET-003-001: プレビュークリアテスト
**前提条件:**
- 商品の説明: 「NIKE AIR JORDAN 1は...」と入力済み
- 商品の説明プレビュー: HTML表示済み（文字装飾あり）

**実行操作:**
1. リセットボタンをクリック

**期待結果:**
- 商品の説明: 空
- 商品の説明プレビュー: 空（何も表示されない）

#### TC-RESET-003-002: デグレードテスト（説明入力）
**前提条件:**
- リセット直後の状態

**実行操作:**
1. 商品の説明に「新しい商品説明」と入力
2. プレビュー更新ボタンをクリック

**期待結果:**
- プレビューに「新しい商品説明」が正常に表示される

### ✏️ 修正内容
- [x] resetForm関数に商品の説明プレビューをクリアする処理を追加
- [x] プレビュー要素のIDを特定（「商品の説明」textarea）
- [ ] TC-RESET-003-001実行
- [ ] TC-RESET-003-002実行（デグレード確認）

**実装詳細:**
- ファイル: `sp_scripts.html`
- 行数: 3962-3966
- 修正内容: `descPreview.value = '';` を追加してtextareaをクリア

### 📝 テスト結果
- [ ] TC-RESET-003-001: PASS / FAIL
- [ ] TC-RESET-003-002: PASS / FAIL

### 状態
- [ ] ✅ DONE (完了日: )

---

## RESET-002 | バグ: 商品名ブロックの情報が残る

### 📌 基本情報
- [ ] カテゴリ: バグ修正
- [ ] 優先度: 高
- [ ] 影響範囲: リセット機能、商品名ブロック
- [ ] 発見日: 2025-10-21

### 🐛 不具合内容
リセットボタンをクリックしても、商品名ブロック内の以下の情報が残る：
- ブランド情報表示
- 商品名プレビュー
- AI属性

**現状の動作：**
- 基本情報のブランド選択: 正常にクリアされる ✅
- 商品名ブロックのブランド情報表示: クリアされない ❌
- 商品名ブロックのアイテム名: 正常にクリアされる ✅
- 商品名プレビュー: クリアされない ❌
- AI属性: クリアされない ❌

**問題点：**
- 前の商品の情報が残ったまま次の商品を登録してしまう可能性
- 特にAI属性は重要な情報なので残っていると混乱する

### ✅ 期待動作
リセット時に、商品名ブロック内の全ての表示情報がクリアされる。

### 📍 関連ファイル
- `sp_scripts.html` (resetForm関数)
- `sp_block_product_name.html` (商品名ブロックUI)

### 🧪 テストケース

#### TC-RESET-002-001: 商品名ブロッククリアテスト
**前提条件:**
- 基本情報ブランド: 「NIKE」選択済み
- 商品名ブロックのブランド情報: 「NIKE」表示済み
- アイテム名: 「AIR JORDAN 1」入力済み
- 商品名プレビュー: 「NIKE AIR JORDAN 1」表示済み
- AI属性: 「HIGH OG」入力済み

**実行操作:**
1. リセットボタンをクリック

**期待結果:**
- 基本情報ブランド: 空
- 商品名ブロックのブランド情報: 空（非表示）
- アイテム名: 空
- 商品名プレビュー: 空（非表示）
- AI属性: 空

#### TC-RESET-002-002: デグレードテスト（ブランド連動）
**前提条件:**
- リセット直後の状態

**実行操作:**
1. 基本情報のブランドで「NIKE」を選択

**期待結果:**
- 商品名ブロックのブランド情報に「NIKE」が正常に表示される

### ✏️ 修正内容
- [ ] ブランド情報表示要素のIDを特定
- [ ] 商品名プレビュー要素のIDを特定
- [ ] AI属性要素のIDを特定
- [ ] resetForm関数に各要素をクリアする処理を追加
- [ ] TC-RESET-002-001実行
- [ ] TC-RESET-002-002実行（デグレード確認）

### 📝 テスト結果
- [ ] TC-RESET-002-001: PASS / FAIL
- [ ] TC-RESET-002-002: PASS / FAIL

### 状態
- [ ] ✅ DONE (完了日: )

---

## RESET-001 | バグ: 管理番号プレフィックス・棚番号が残る

### 📌 基本情報
- [ ] カテゴリ: バグ修正
- [ ] 優先度: 高
- [ ] 影響範囲: リセット機能、基本情報ブロック
- [ ] 発見日: 2025-10-21

### 🐛 不具合内容
リセットボタンをクリックしても、管理番号プレフィックスと棚番号が残る。

**現状の動作：**
- カテゴリー: 正常にクリアされる ✅
- ブランド: 正常にクリアされる ✅
- アイテム名: 正常にクリアされる ✅
- 管理番号プレフィックス: クリアされない ❌
- 棚番号: クリアされない ❌

**問題点：**
- 前の商品の管理番号プレフィックスが残る
- 前の商品の棚番号が残る
- 次の商品登録時に誤った情報が使われる可能性

### ✅ 期待動作
リセット時に、管理番号プレフィックスと棚番号も空になる。

### 📍 関連ファイル
- `sp_scripts.html` (resetForm関数)

### 🧪 テストケース

#### TC-RESET-001-001: 基本情報クリアテスト
**前提条件:**
- カテゴリー: 「スニーカー」選択済み
- ブランド: 「NIKE」選択済み
- アイテム名: 「ハイカットスニーカー」選択済み
- 管理番号プレフィックス: 「SN-2025-」入力済み
- 棚番号: 「A-01」入力済み

**実行操作:**
1. リセットボタンをクリック

**期待結果:**
- カテゴリー: 空（初期状態）
- ブランド: 空（初期状態）
- アイテム名: 空（初期状態）
- 管理番号プレフィックス: 空
- 棚番号: 空

#### TC-RESET-001-002: デグレードテスト（管理番号生成）
**前提条件:**
- リセット直後の状態

**実行操作:**
1. カテゴリー: 「スニーカー」選択
2. ブランド: 「NIKE」選択
3. アイテム名: 「ハイカットスニーカー」選択

**期待結果:**
- 管理番号が新規生成される（例: SN-2025-002）
- 連番が正しくインクリメントされる

### ✏️ 修正内容
- [ ] resetForm関数に管理番号プレフィックスのクリア処理を追加
- [ ] resetForm関数に棚番号のクリア処理を追加
- [ ] TC-RESET-001-001実行
- [ ] TC-RESET-001-002実行（デグレード確認）

### 📝 テスト結果
- [ ] TC-RESET-001-001: PASS / FAIL
- [ ] TC-RESET-001-002: PASS / FAIL

### 状態
- [ ] ✅ DONE (完了日: )

---

**Issue数: 4件**
**最終更新: 2025-10-21**
