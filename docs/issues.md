# Issues（未完了）

このファイルは、REBORN Inventoryプロジェクトの**未完了Issue**を管理します。

**運用ルール：**
- 新しいIssueは該当カテゴリの最上部に追加
- 完了したIssue（✅ DONE）は `issues-closed.md` に移動
- 定期的にレビュー（週1回推奨）

**関連ドキュメント：**
- [TDD_POLICY.md](./TDD_POLICY.md) - Issue管理ルール詳細
- [ISSUE_TEMPLATE.md](./ISSUE_TEMPLATE.md) - Issue起票テンプレート
- [issues-closed.md](./issues-closed.md) - 完了Issueアーカイブ

---

## 🐛 バグ修正（Bug Fixes）

**現在のバグ: 1件**

---

## INV-002 | バグ: PWA版で在庫管理メニューボタンが押せない

### 📌 基本情報
- [ ] カテゴリ: バグ修正
- [ ] 優先度: 高
- [ ] 影響範囲: 在庫管理（PWA/モバイル版）
- [ ] 発見日: 2025-10-24

### 🐛 不具合内容
PWA（モバイル版）で在庫管理メニューボタンをタップしても反応しない。
PC版（スプレッドシート）では正常に動作している。

**症状:**
- スマホのドロワーメニューで「📦 在庫管理」をタップしても何も起きない
- ボタン自体が押せない状態

### ✅ 期待動作
- ドロワーメニューの「📦 在庫管理」をタップすると在庫管理画面が表示される
- PC版と同じ動作をする

### 📍 関連ファイル
- `docs/index.html` (ドロワーメニュー、navigateToPage関数)
- `menu.js` (doGet関数)

### 🧪 テストケース
#### TC-INV-002-001: PWAで在庫管理メニュー動作確認
**前提条件:**
- PWAアプリがインストール済み、またはブラウザでCloudflare Pages URLを開いている
- ドロワーメニューが表示されている

**実行操作:**
1. 左上のメニューアイコン（☰）をタップしてドロワーメニューを開く
2. 「📦 在庫管理」をタップ

**期待結果:**
- 在庫管理画面が表示される
- ダッシュボード、検索フォーム、商品一覧が表示される

#### TC-INV-002-002: デグレード確認（他のメニュー）
**前提条件:**
- PWAアプリがインストール済み

**実行操作:**
1. 「📝 商品登録」をタップ
2. 「⚙️ 設定」をタップ

**期待結果:**
- それぞれの画面が正常に表示される

### ✏️ 修正内容
- [ ] docs/index.htmlの在庫管理ボタン実装を確認
- [ ] CSS/JavaScriptの無効化要因を調査
- [ ] 修正実装
- [ ] TC-INV-002-001実行
- [ ] TC-INV-002-002実行（デグレード確認）

### 📝 テスト結果
- [ ] TC-INV-002-001: PASS / FAIL
- [ ] TC-INV-002-002: PASS / FAIL

### 状態
- [ ] ✅ DONE (完了日: )

---

---

## ✨ 機能追加・改善（Features & Improvements）

**現在の機能追加・改善: 1件**

---

## INV-001 | 機能追加: Phase 1 在庫管理システム実装

### 📌 基本情報
- [ ] カテゴリ: 機能追加
- [ ] 優先度: 高
- [ ] 影響範囲: 在庫管理（新規機能）
- [ ] 要望日: 2025-10-24

### 💡 要望内容

Phase 1の在庫管理システムを実装する。以下の機能を含む：

**実装する機能**:
1. 在庫検索・絞り込み機能
2. 商品複製機能（メルカリ再出品、類似商品登録）
3. 在庫状況ダッシュボード
4. ステータス手動変更
5. 出品前商品の編集
6. 画像差し替え

**実装しない機能（Phase 2以降）**:
- 出品後商品の全項目編集
- 複数プラットフォーム管理
- 一括価格変更

### ✅ 期待動作

**在庫検索・絞り込み**:
- ステータス、ブランド、カテゴリ、サイズ、カラー等で絞り込み可能
- 一覧表示（カード形式、50件/ページ）
- ソート機能（登録日時、出品日、販売日、利益金額）

**商品複製**:
- 既存商品データを全コピー
- 管理番号のみ新規採番
- ステータスを「登録済み」にリセット
- 商品登録フォームを開く（データ入力済み）

**在庫状況ダッシュボード**:
- ステータス別件数表示
- 総在庫金額、総出品金額、総販売金額、総利益金額
- 平均在庫日数

### 📍 関連ファイル
- `inventory.js` (在庫管理バックエンド)
- `sidebar_inventory.html` (在庫管理UI)
- `INVENTORY_MANAGEMENT_DESIGN.md` (設計書)

### 🧪 テストケース

#### TC-INV-001-001: 在庫検索（ステータス絞り込み）
**前提条件:**
- スプレッドシートに複数ステータスの商品が存在
  - 登録済み: 5件
  - 出品中: 10件
  - 販売済み: 20件

**実行操作:**
1. 在庫管理画面を開く
2. ステータスフィルタで「出品中」を選択
3. 検索ボタンをクリック

**期待結果:**
- 「出品中」の商品10件のみが表示される
- 他のステータスの商品は表示されない

#### TC-INV-001-002: 商品複製
**前提条件:**
- 管理番号 AA-1001 の商品が存在
- 次の管理番号は AA-1002

**実行操作:**
1. 在庫一覧で AA-1001 の「複製」ボタンをクリック
2. 商品登録フォームが開く
3. そのまま「登録」ボタンをクリック

**期待結果:**
- 新しい商品が AA-1002 として登録される
- AA-1001 のデータ（ブランド、カテゴリ等）が全てコピーされている
- ステータスは「登録済み」
- 出品日、販売日はクリアされている

#### TC-INV-001-003: 在庫状況ダッシュボード
**前提条件:**
- 登録済み: 5件（仕入金額合計: 10,000円）
- 出品中: 10件（仕入金額合計: 50,000円、出品金額合計: 100,000円）
- 販売済み: 20件（販売金額合計: 500,000円、利益金額合計: 200,000円）

**実行操作:**
1. 在庫管理画面を開く
2. ダッシュボードを表示

**期待結果:**
- ステータス別件数が正しく表示される
  - 登録済み: 5件
  - 出品中: 10件
  - 販売済み: 20件
- 総在庫金額: 60,000円
- 総出品金額: 100,000円
- 総販売金額: 500,000円
- 総利益金額: 200,000円

### ✏️ 実装内容

#### Phase 1-1: 在庫検索・絞り込み機能 ✅ 完了
- [x] バックエンド関数実装（`inventory.js`）
  - [x] `searchInventoryAPI(params)` - 検索・絞り込み（ページネーション、ソート、詳細フィルタ対応）
  - [x] `getStatisticsAPI(params)` - 統計情報取得（新ステータス対応）
- [x] フロントエンド実装（`sidebar_inventory.html`）
  - [x] 検索フォームUI
  - [x] フィルタUI（ステータス複数選択、ブランド、カテゴリ、サイズ、カラー、テキスト検索）
  - [x] 一覧表示UI（カード形式、レスポンシブ）
  - [x] ページネーション
  - [x] ソート機能
- [ ] TC-INV-001-001 実行（次回テスト予定）

#### Phase 1-2: 商品複製機能 ✅ 完了
- [x] バックエンド関数実装（`inventory.js`）
  - [x] `duplicateProductAPI(params)` - 商品複製
- [x] フロントエンド実装（`sidebar_inventory.html`）
  - [x] 「複製」ボタン追加
  - [x] 複製処理実装
- [ ] TC-INV-001-002 実行（次回テスト予定）

#### Phase 1-3: 在庫状況ダッシュボード ✅ 完了
- [x] バックエンド関数実装（`inventory.js`）
  - [x] `getStatisticsAPI(params)` - 統計情報取得
- [x] フロントエンド実装（`sidebar_inventory.html`）
  - [x] ダッシュボードUI（ステータス別件数、総利益、平均在庫日数）
  - [x] 統計情報表示
- [ ] TC-INV-001-003 実行（次回テスト予定）

#### Phase 1-4: その他機能
- [ ] ステータス手動変更機能
- [ ] 出品前商品の編集機能
- [ ] 画像差し替え機能

### 📝 テスト結果
- [ ] TC-INV-001-001: PASS / FAIL
- [ ] TC-INV-001-002: PASS / FAIL
- [ ] TC-INV-001-003: PASS / FAIL
- [ ] デグレード確認（商品登録機能）: OK / NG

### 状態
- [ ] ✅ DONE (完了日: )

---

---

## 🔧 技術的負債・リファクタリング（Technical Debt）

**現在の技術的負債: 0件**

---

**総Issue数: 0件**
**最終更新: 2025-10-23**
