# REBORN プロジェクト - 正しい開発ロードマップ

**作成日**: 2025年10月20日
**目的**: 基本機能を優先し、確実に使えるシステムを構築

---

## 🚨 重要な注意事項

**Claude Code へ**: このロードマップを厳守すること

**Phase を飛ばした提案は絶対禁止**:
- ❌ Phase 1の段階で Phase 4（Agent SDK）を提案してはいけない
- ❌ 基礎機能が完成していない段階での高度な機能提案は禁止
- ✅ 現在の Phase の内容のみを提案すること

**詳細**: [API_SAFETY_CRITICAL.md](API_SAFETY_CRITICAL.md)を参照

---

## 🎯 開発哲学

### ❌ 間違ったアプローチ
```
商品登録(100%) → すぐにAgent SDK → SaaS化
                  ↑
                  基礎ができていない！
```

### ✅ 正しいアプローチ
```
1. 商品登録(100%) ✅
2. 在庫管理(0→100%) ← 今ココ
3. 売上管理(20→100%)
4. チーム連携(10→100%)
5. 実運用しながら改善
6. SaaS化の準備
7. Agent SDK導入
```

---

## 📋 フェーズ1: 基本機能完成（最優先）

### 目標
**自分たちが実際に使えるシステムを完成させる**

### 期間
**4-6週間**

---

### ステップ1: 在庫管理システム（2週間）

**なぜ最優先？**
- 商品登録したデータを活用する
- 実際の業務で必須
- チーム連携の基盤になる

**実装機能:**

#### 1-1. 在庫検索（1週間）
```
【機能】
- ブランド名で検索
- アイテム種類で検索
- 管理番号で検索
- 複数条件で検索
- 販売状況で絞り込み（在庫中/販売済み/取り下げ）

【UI】
- sidebar_inventory.html（既存）を完成させる
- 検索結果を一覧表示
- クリックで詳細表示
- 編集ボタン
```

#### 1-2. 在庫編集（3日）
```
【機能】
- 価格変更
- 販売状況更新
- メモ追加
- 画像追加・削除

【UI】
- 編集モーダル
- バリデーション
- 保存確認
```

#### 1-3. 在庫状況の可視化（2日）
```
【機能】
- 在庫点数表示
- カテゴリ別集計
- ブランド別集計
- 仕入れ価格合計
- 販売価格合計

【UI】
- ダッシュボード
- シンプルなグラフ（Chart.js）
- 数値サマリー
```

#### 1-4. 在庫アラート（2日）
```
【機能】
- 長期在庫（30日以上）を検出
- 値下げ推奨商品をリスト化
- プッシュ通知で報告

【実装】
- 毎朝9時にチェック（トリガー）
- FCM経由でプッシュ通知
- PWAアプリで確認
```

**完成基準:**
- ✅ 在庫を検索できる
- ✅ 在庫を編集できる
- ✅ 在庫状況を把握できる
- ✅ アラートが届く

---

### ステップ2: 売上管理システム（2週間）

**なぜ重要？**
- 利益を把握する
- 何が売れているか分析
- 次の仕入れ戦略を立てる

**実装機能:**

#### 2-1. 売上記録（5日）
```
【機能】
- 販売完了を記録
- 販売日、販売価格、手数料、送料を入力
- 利益を自動計算
- 販売プラットフォームを記録（メルカリ、ラクマ等）

【UI】
- 在庫一覧から「販売済みにする」ボタン
- 販売情報入力フォーム
- 利益計算プレビュー
```

#### 2-2. 売上集計（3日）
```
【機能】
- 期間指定（今日、今週、今月、カスタム）
- 売上合計
- 利益合計
- 販売点数
- 利益率

【UI】
- ダッシュボード
- 期間選択ドロップダウン
- サマリー表示
```

#### 2-3. 売上分析（3日）
```
【機能】
- ブランド別売上ランキング
- カテゴリ別売上ランキング
- 売れ筋商品TOP10
- 回転率の良い商品

【UI】
- グラフ（Chart.js）
- ランキング表
- トレンド表示
```

#### 2-4. 売上レポート（3日）
```
【機能】
- 週次レポート自動生成
- 月次レポート自動生成
- プッシュ通知で配信

【実装】
- 毎週月曜9時に週次レポート
- 毎月1日9時に月次レポート
- FCM経由でプッシュ通知
```

**完成基準:**
- ✅ 売上を記録できる
- ✅ 売上を集計できる
- ✅ 売上を分析できる
- ✅ レポートが届く

---

### ステップ3: チーム連携（2週間）

**なぜ必要？**
- 自分たちがチームで使う
- 実際の業務で検証
- SaaS化の基盤

**実装機能:**

#### 3-1. ユーザー管理（1週間）
```
【機能】
- ユーザー追加・削除
- 権限設定（管理者/メンバー）
- ユーザー一覧表示

【UI】
- 設定管理の新しいタブ
- ユーザー一覧
- 追加・編集フォーム

【データ】
- 設定マスタに「チームメンバー」シート追加
- 名前、メールアドレス、権限、FCMトークン
```

#### 3-2. タスク通知（5日）
```
【機能】
- 商品登録完了 → チーム全員に通知
- 在庫アラート → 管理者に通知
- 売上記録 → チーム全員に通知
- 週次/月次レポート → チーム全員に通知

【実装】
- web_push.js を拡張
- 複数のFCMトークンに送信
- 通知設定（誰に何を送るか）
```

#### 3-3. 作業履歴（2日）
```
【機能】
- 誰が、いつ、何をしたか記録
- 商品登録、編集、販売を追跡
- 履歴を閲覧

【UI】
- 履歴タブ
- タイムライン表示
- フィルター機能

【データ】
- スプレッドシートに「作業履歴」シート追加
```

**完成基準:**
- ✅ チームメンバーを管理できる
- ✅ 全員に通知が届く
- ✅ 作業履歴を確認できる

---

## 📋 フェーズ2: 実運用と改善（4-8週間）

### 目標
**実際にチームで使いながらブラッシュアップ**

### 活動内容

#### 実際に使う
- 毎日の商品登録
- 在庫管理
- 売上記録
- チーム連携

#### 問題点を記録
- 使いにくい箇所
- バグ
- 足りない機能
- 改善案

#### 継続的に改善
- UI/UX改善
- パフォーマンス最適化
- エラー修正
- 機能追加

**この期間が最も重要！**

---

## 📋 フェーズ3: SaaS化準備（2-3ヶ月）

### 前提条件
- ✅ フェーズ1完了
- ✅ フェーズ2で実運用経験あり
- ✅ システムが安定稼働

### 実装内容

#### 3-1. マルチテナント対応
```
【機能】
- 複数のチーム（テナント）を管理
- データの完全分離
- テナントIDでの識別

【実装】
- スプレッドシートを分離 or
- テナントIDカラム追加
```

#### 3-2. ユーザー認証
```
【機能】
- メールアドレス/パスワード認証
- Google認証
- パスワードリセット

【技術】
- Firebase Authentication or
- Auth0
```

#### 3-3. 課金システム
```
【機能】
- プラン選択（個人/チーム/エンタープライズ）
- 決済処理（Stripe）
- サブスクリプション管理

【プラン案】
- 個人: 月額980円
- チーム: 月額4,980円（5人まで）
- エンタープライズ: 要見積もり
```

#### 3-4. reborn-ai-chat実装
```
【タイミング】
SaaS化が決まったら実装開始

【機能】
- レベルA: 基本サポート
- レベルB: システム連携
- レベルC: 操作代行（余裕があれば）
```

---

## 📋 フェーズ4: Agent SDK導入（3-6ヶ月後）

### 前提条件
- ✅ SaaS化完了
- ✅ 一定数のユーザー獲得
- ✅ 安定した収益

### 導入機能

#### 画像→自動商品登録
- Gemini Vision API
- メルカリ価格調査
- 自動登録

#### 在庫最適化エージェント
- 自動分析
- 値下げ提案
- 一括更新

#### 売上分析エージェント
- レポート自動生成
- 戦略提案

**ポイント: 基礎ができているからこそ活きる**

---

## 🎯 PWA/プッシュ通知の活用方法

### 現在（フェーズ1-2）

```
【プッシュ通知の使い道】

1. 在庫アラート
   - 長期在庫を検出
   - 毎朝9時に通知

2. 売上レポート
   - 週次レポート（毎週月曜9時）
   - 月次レポート（毎月1日9時）

3. チーム連携
   - 商品登録完了通知
   - 売上記録通知
   - タスク割り当て通知

4. システム通知
   - エラー発生
   - バックアップ完了
   - メンテナンス予告
```

### 将来（フェーズ3-4）

```
【高度な活用】

1. Agent連携
   - 自動分析結果を通知
   - 提案を通知
   - 完了報告を通知

2. ユーザー間通知
   - メッセージ
   - タスク依頼
   - 承認依頼

3. 外部連携
   - メルカリの問い合わせ通知
   - 在庫切れアラート
   - 配送状況更新
```

---

## 💰 各フェーズのコスト

### フェーズ1-2: 基本機能完成・実運用
```
ドメイン: ¥1,500/年
その他: 無料（GAS、FCM）
合計: ¥1,500/年（¥125/月）
```

### フェーズ3: SaaS化準備
```
ドメイン: ¥1,500/年
Firebase: $25/月（Blaze）
サーバー: $20/月（reborn-ai-chat）
決済: Stripe（売上の3.6%）
合計: $45/月 + 手数料（約¥7,000/月 + 手数料）
```

### フェーズ4: Agent SDK導入
```
上記 + Anthropic API: $50/月
合計: $95/月（約¥14,000/月）
```

---

## 🗓️ スケジュール

### 今月（10月）
- [x] 商品登録完成 ✅
- [x] PWA化完成 ✅
- [x] プッシュ通知基盤完成 ✅
- [ ] 在庫管理開始

### 来月（11月）
- [ ] 在庫管理完成
- [ ] 売上管理完成

### 12月
- [ ] チーム連携完成
- [ ] フェーズ1完了

### 2026年1-2月
- [ ] 実運用（フェーズ2）
- [ ] 改善・最適化

### 2026年3月以降
- [ ] SaaS化検討
- [ ] 必要に応じてフェーズ3開始

---

## 🎯 現時点での作業優先順位

### 最優先（今すぐ）
1. **在庫管理システムの設計**
   - UI設計
   - データ構造設計
   - 機能リスト作成

2. **在庫検索機能の実装**
   - inventory.js の拡張
   - sidebar_inventory.html の完成
   - 検索ロジック実装

### 次（今週中）
3. **在庫編集機能**
4. **在庫状況の可視化**
5. **在庫アラート（プッシュ通知活用）**

### その次（来週以降）
6. **売上管理システム**
7. **チーム連携**

---

## 📝 重要な判断基準

### やる/やらないの判断

**✅ やる:**
- 今すぐ使える機能
- 実運用で必須の機能
- シンプルで確実に動く機能

**❌ 今はやらない:**
- 将来的に必要だが今は不要
- 複雑で時間がかかる
- 基礎ができていないと意味がない

### Agent SDKを導入する条件

1. ✅ 基本機能（在庫・売上）が完成
2. ✅ 実運用で安定稼働
3. ✅ チーム連携が機能している
4. ✅ SaaS化の目処が立っている
5. ✅ 投資できる予算がある

**すべて満たしてから検討**

---

## 🎉 まとめ

### 正しい道筋

```
今（10月）
  ↓
在庫管理完成（11月）
  ↓
売上管理完成（11月）
  ↓
チーム連携完成（12月）
  ↓
実運用・改善（1-2月）
  ↓
SaaS化検討（3月〜）
  ↓
reborn-ai-chat実装
  ↓
Agent SDK導入
```

### 心構え

**焦らない**
- 基礎をしっかり作る
- 一歩ずつ確実に

**実際に使う**
- 自分たちが使えるものを作る
- 実運用で検証する

**順序を守る**
- 先に進みたくなっても我慢
- 基礎ができてから応用へ

---

**このロードマップに従えば、確実に使えるシステムが完成します！**
