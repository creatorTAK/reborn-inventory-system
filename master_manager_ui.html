<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
body { font-family: system-ui, sans-serif; padding: 16px; font-size: 13px; background: #f8fafc; margin: 0; }
.header { background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%); color: white; padding: 16px; margin: -16px -16px 20px -16px; border-radius: 0 0 12px 12px; }
.header h2 { margin: 0; font-size: 18px; font-weight: 600; }
.header p { margin: 8px 0 0 0; font-size: 13px; opacity: 0.9; }
.section { background: white; border-radius: 12px; padding: 16px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); border: 1px solid #e5e7eb; }
.section-title { font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 2px solid #f3f4f6; }
.category-selector { margin-bottom: 16px; }
.category-selector select { width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 13px; background: white; }
.category-selector select:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }
.keyword-list { max-height: 200px; overflow-y: auto; border: 1px solid #e5e7eb; border-radius: 6px; background: #f9fafb; }
.keyword-item { padding: 8px 12px; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; }
.keyword-item:last-child { border-bottom: none; }
.keyword-item:hover { background: #f0f9ff; }
.keyword-text { flex: 1; font-size: 13px; color: #374151; }
.keyword-actions { display: flex; gap: 4px; }
.btn { padding: 6px 12px; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 500; transition: all 0.2s; }
.btn-primary { background: #3b82f6; color: white; }
.btn-primary:hover { background: #2563eb; }
.btn-danger { background: #ef4444; color: white; }
.btn-danger:hover { background: #dc2626; }
.btn-warning { background: #f59e0b; color: white; }
.btn-warning:hover { background: #d97706; }
.btn-secondary { background: #6b7280; color: white; }
.btn-secondary:hover { background: #4b5563; }
.btn-small { padding: 4px 8px; font-size: 11px; }
.input-group { margin-bottom: 12px; }
.input-group label { display: block; margin-bottom: 4px; font-size: 12px; font-weight: 500; color: #374151; }
.input-group input, .input-group textarea { width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 13px; box-sizing: border-box; }
.input-group input:focus, .input-group textarea:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }
.actions { display: flex; gap: 8px; margin-top: 12px; }
.actions .btn { flex: 1; }
.message { margin: 12px 0; padding: 12px; border-radius: 6px; font-size: 13px; }
.message.success { background: #d1fae5; color: #065f46; border: 1px solid #10b981; }
.message.error { background: #fee2e2; color: #991b1b; border: 1px solid #ef4444; }
.message.info { background: #dbeafe; color: #1e40af; border: 1px solid #3b82f6; }
.stats { background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 6px; padding: 12px; margin-bottom: 16px; }
.stats-item { display: flex; justify-content: space-between; margin-bottom: 4px; font-size: 12px; }
.stats-item:last-child { margin-bottom: 0; }
.stats-label { color: #0c4a6e; font-weight: 500; }
.stats-value { color: #0369a1; font-weight: 600; }
.search-box { margin-bottom: 12px; }
.search-box input { width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 13px; box-sizing: border-box; }
.empty-state { text-align: center; padding: 32px 16px; color: #6b7280; }
.empty-state .icon { font-size: 48px; margin-bottom: 16px; opacity: 0.5; }
.loading { text-align: center; padding: 20px; color: #6b7280; }
.tab-container { margin-bottom: 16px; }
.tabs { display: flex; background: #f3f4f6; border-radius: 8px; padding: 4px; }
.tab { flex: 1; padding: 8px 12px; text-align: center; font-size: 12px; font-weight: 500; cursor: pointer; border-radius: 6px; transition: all 0.2s; }
.tab.active { background: white; color: #3b82f6; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
.tab:not(.active) { color: #6b7280; }
.tab:not(.active):hover { color: #374151; }
.bulk-import { margin-top: 16px; }
.bulk-import textarea { resize: vertical; min-height: 80px; }
</style>
</head>
<body>
<div class="header">
<h2>ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h2>
<p>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ã‚’å®‰å…¨ã«è¡Œãˆã¾ã™</p>
</div>

<!-- çµ±è¨ˆæƒ…å ± -->
<div class="stats" id="statsSection" style="display: none;">
<div class="stats-item">
<span class="stats-label">é¸æŠä¸­ã®ã‚«ãƒ†ã‚´ãƒª</span>
<span class="stats-value" id="currentCategory">-</span>
</div>
<div class="stats-item">
<span class="stats-label">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ•°</span>
<span class="stats-value" id="keywordCount">0</span>
</div>
</div>

<!-- ã‚«ãƒ†ã‚´ãƒªé¸æŠ -->
<div class="section">
<div class="section-title">ã‚«ãƒ†ã‚´ãƒªé¸æŠ</div>
<div class="category-selector">
<select id="categorySelect">
<option value="">-- ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ --</option>
</select>
</div>
</div>

<!-- ã‚¿ãƒ– -->
<div class="tab-container">
<div class="tabs">
<div class="tab active" onclick="switchTab('manage')">ç®¡ç†</div>
<div class="tab" onclick="switchTab('bulk')">ä¸€æ‹¬</div>
<div class="tab" onclick="switchTab('cleanup')">æ•´ç†</div>
</div>
</div>

<!-- ç®¡ç†ã‚¿ãƒ– -->
<div id="manageTab" class="tab-content">
<!-- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¿½åŠ  -->
<div class="section">
<div class="section-title">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¿½åŠ </div>
<div class="input-group">
<label>æ–°ã—ã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</label>
<input type="text" id="newKeyword" placeholder="è¿½åŠ ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
</div>
<div class="actions">
<button class="btn btn-primary" onclick="addKeyword()">è¿½åŠ </button>
</div>
</div>

<!-- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ä¸€è¦§ -->
<div class="section">
<div class="section-title">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ä¸€è¦§</div>
<div class="search-box">
<input type="text" id="searchKeyword" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æ¤œç´¢..." oninput="filterKeywords()">
</div>
<div id="keywordList" class="keyword-list">
<div class="empty-state">
<div class="icon">ğŸ“‹</div>
<p>ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„</p>
</div>
</div>
</div>
</div>

<!-- ä¸€æ‹¬æ“ä½œã‚¿ãƒ– -->
<div id="bulkTab" class="tab-content" style="display: none;">
<div class="section">
<div class="section-title">ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</div>
<div class="input-group">
<label>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ä¸€è¦§ï¼ˆ1è¡Œã¾ãŸã¯1é …ç›®ã«ã¤ã1ã¤ï¼‰</label>
<textarea id="bulkKeywords" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰1&#10;ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰2&#10;ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰3&#10;&#10;ã¾ãŸã¯&#10;&#10;ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰1, ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰2, ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰3"></textarea>
</div>
<div class="actions">
<button class="btn btn-primary" onclick="bulkImport()">ä¸€æ‹¬è¿½åŠ </button>
</div>
</div>
</div>

<!-- æ•´ç†ã‚¿ãƒ– -->
<div id="cleanupTab" class="tab-content" style="display: none;">
<div class="section">
<div class="section-title">ãƒ‡ãƒ¼ã‚¿æ•´ç†</div>
<p style="font-size: 12px; color: #6b7280; margin-bottom: 16px;">
é‡è¤‡ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®å‰Šé™¤ã‚„ç©ºè¡Œã®æ•´ç†ã‚’è¡Œã„ã¾ã™ã€‚
</p>
<div class="actions">
<button class="btn btn-warning" onclick="cleanupData()">æ•´ç†å®Ÿè¡Œ</button>
</div>
</div>
</div>

<!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º -->
<div id="message" class="message" style="display: none;"></div>

<!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆç°¡æ˜“ç‰ˆï¼‰ -->
<div id="editModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000;">
<div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 24px; border-radius: 12px; min-width: 300px;">
<h3 style="margin: 0 0 16px 0; font-size: 16px;">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç·¨é›†</h3>
<div class="input-group">
<label>å¤‰æ›´å¾Œã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</label>
<input type="text" id="editKeyword" placeholder="æ–°ã—ã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
</div>
<div class="actions">
<button class="btn btn-primary" onclick="saveEdit()">ä¿å­˜</button>
<button class="btn btn-secondary" onclick="cancelEdit()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
</div>
</div>
</div>

<script>
let currentMasterData = {};
let currentCategory = '';
let currentKeywords = [];
let editingKeyword = '';
let filteredKeywords = [];

// åˆæœŸåŒ–
function initialize() {
  // Google Apps Scriptç’°å¢ƒã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯
  if (typeof google === 'undefined' || !google.script || !google.script.run) {
    showMessage('ã“ã®UIã¯Google Apps Scriptç’°å¢ƒã§ã®ã¿å‹•ä½œã—ã¾ã™', 'info');
    return;
  }
  
  showMessage('ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...', 'info');
  google.script.run
    .withSuccessHandler(function(result) {
      if (result.success) {
        currentMasterData = result.categories;
        populateCategorySelect();
        hideMessage();
      } else {
        showMessage(result.message, 'error');
      }
    })
    .withFailureHandler(function(error) {
      showMessage(`èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
    })
    .getMasterDataByCategory();
}

// ã‚«ãƒ†ã‚´ãƒªã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®è¨­å®š
function populateCategorySelect() {
  const select = document.getElementById('categorySelect');
  select.innerHTML = '<option value="">-- ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ --</option>';
  
  const categories = Object.keys(currentMasterData).sort();
  categories.forEach(category => {
    const option = document.createElement('option');
    option.value = category;
    option.textContent = `${category} (${currentMasterData[category].length}ä»¶)`;
    select.appendChild(option);
  });
  
  select.addEventListener('change', function() {
    selectCategory(this.value);
  });
}

// ã‚«ãƒ†ã‚´ãƒªé¸æŠ
function selectCategory(category) {
  currentCategory = category;
  if (category) {
    currentKeywords = currentMasterData[category] || [];
    filteredKeywords = [...currentKeywords];
    updateStats();
    displayKeywords();
    document.getElementById('statsSection').style.display = 'block';
    document.getElementById('searchKeyword').value = '';
  } else {
    currentKeywords = [];
    filteredKeywords = [];
    document.getElementById('keywordList').innerHTML = '<div class="empty-state"><div class="icon">ğŸ“‹</div><p>ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„</p></div>';
    document.getElementById('statsSection').style.display = 'none';
  }
}

// çµ±è¨ˆæƒ…å ±æ›´æ–°
function updateStats() {
  document.getElementById('currentCategory').textContent = currentCategory;
  document.getElementById('keywordCount').textContent = currentKeywords.length;
}

// ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¡¨ç¤º
function displayKeywords() {
  const container = document.getElementById('keywordList');
  const keywords = filteredKeywords.length > 0 ? filteredKeywords : currentKeywords;
  
  if (keywords.length === 0) {
    container.innerHTML = '<div class="empty-state"><div class="icon">ğŸ“</div><p>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã›ã‚“</p></div>';
    return;
  }
  
  container.innerHTML = '';
  keywords.forEach(keyword => {
    const item = document.createElement('div');
    item.className = 'keyword-item';
    item.innerHTML = `
      <span class="keyword-text">${escapeHtml(keyword)}</span>
      <div class="keyword-actions">
        <button class="btn btn-warning btn-small" onclick="editKeyword('${escapeHtml(keyword)}')">ç·¨é›†</button>
        <button class="btn btn-danger btn-small" onclick="deleteKeyword('${escapeHtml(keyword)}')">å‰Šé™¤</button>
      </div>
    `;
    container.appendChild(item);
  });
}

// ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿
function filterKeywords() {
  const searchTerm = document.getElementById('searchKeyword').value.trim().toLowerCase();
  if (searchTerm === '') {
    filteredKeywords = [...currentKeywords];
  } else {
    filteredKeywords = currentKeywords.filter(keyword => 
      keyword.toLowerCase().includes(searchTerm)
    );
  }
  displayKeywords();
}

// ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¿½åŠ 
function addKeyword() {
  if (!currentCategory) {
    showMessage('ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„', 'error');
    return;
  }
  
  const newKeyword = document.getElementById('newKeyword').value.trim();
  if (!newKeyword) {
    showMessage('ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
    return;
  }
  
  console.log(`ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¿½åŠ é–‹å§‹: "${newKeyword}" â†’ "${currentCategory}"`);
  showMessage('è¿½åŠ ä¸­...', 'info');
  
  google.script.run
    .withSuccessHandler(function(result) {
      console.log('è¿½åŠ æˆåŠŸ:', result);
      if (result && result.success) {
        showMessage(result.message, 'success');
        document.getElementById('newKeyword').value = '';
        refreshCurrentCategory();
      } else {
        const errorMsg = result ? result.message : 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ';
        showMessage(`è¿½åŠ å¤±æ•—: ${errorMsg}`, 'error');
        console.error('è¿½åŠ å¤±æ•—:', result);
      }
    })
    .withFailureHandler(function(error) {
      console.error('è¿½åŠ ã‚¨ãƒ©ãƒ¼:', error);
      showMessage(`ã‚¨ãƒ©ãƒ¼: ${error.message || error}`, 'error');
    })
    .addKeywordToMaster(currentCategory, newKeyword);
}

// ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å‰Šé™¤
function deleteKeyword(keyword) {
  if (!confirm(`ã€Œ${keyword}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
    return;
  }
  
  showMessage('å‰Šé™¤ä¸­...', 'info');
  google.script.run
    .withSuccessHandler(function(result) {
      if (result.success) {
        showMessage(result.message, 'success');
        refreshCurrentCategory();
      } else {
        showMessage(result.message, 'error');
      }
    })
    .withFailureHandler(function(error) {
      showMessage(`ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
    })
    .deleteKeywordFromMaster(currentCategory, keyword);
}

// ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç·¨é›†
function editKeyword(keyword) {
  editingKeyword = keyword;
  document.getElementById('editKeyword').value = keyword;
  document.getElementById('editModal').style.display = 'block';
}

function saveEdit() {
  const newKeyword = document.getElementById('editKeyword').value.trim();
  if (!newKeyword) {
    showMessage('æ–°ã—ã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
    return;
  }
  
  showMessage('æ›´æ–°ä¸­...', 'info');
  google.script.run
    .withSuccessHandler(function(result) {
      if (result.success) {
        showMessage(result.message, 'success');
        cancelEdit();
        refreshCurrentCategory();
      } else {
        showMessage(result.message, 'error');
      }
    })
    .withFailureHandler(function(error) {
      showMessage(`ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
    })
    .editKeywordInMaster(currentCategory, editingKeyword, newKeyword);
}

function cancelEdit() {
  document.getElementById('editModal').style.display = 'none';
  editingKeyword = '';
}

// ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
function bulkImport() {
  if (!currentCategory) {
    showMessage('ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„', 'error');
    return;
  }
  
  const bulkText = document.getElementById('bulkKeywords').value.trim();
  if (!bulkText) {
    showMessage('ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
    return;
  }
  
  showMessage('ä¸€æ‹¬è¿½åŠ ä¸­...', 'info');
  google.script.run
    .withSuccessHandler(function(result) {
      if (result.success) {
        const msg = `è¿½åŠ : ${result.added}ä»¶, é‡è¤‡: ${result.duplicates}ä»¶, ã‚¨ãƒ©ãƒ¼: ${result.errors}ä»¶`;
        showMessage(msg, 'success');
        document.getElementById('bulkKeywords').value = '';
        refreshCurrentCategory();
      } else {
        showMessage(result.message, 'error');
      }
    })
    .withFailureHandler(function(error) {
      showMessage(`ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
    })
    .bulkImportKeywords(currentCategory, bulkText);
}

// ãƒ‡ãƒ¼ã‚¿æ•´ç†
function cleanupData() {
  if (!currentCategory) {
    showMessage('ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„', 'error');
    return;
  }
  
  if (!confirm(`ã€Œ${currentCategory}ã€ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ•´ç†ã—ã¾ã™ã‹ï¼Ÿ`)) {
    return;
  }
  
  showMessage('æ•´ç†ä¸­...', 'info');
  google.script.run
    .withSuccessHandler(function(result) {
      if (result.success) {
        const msg = `æ•´ç†å®Œäº†: é‡è¤‡å‰Šé™¤ ${result.removedDuplicates}ä»¶, ç©ºè¡Œå‰Šé™¤ ${result.removedEmpty}ä»¶`;
        showMessage(msg, 'success');
        refreshCurrentCategory();
      } else {
        showMessage(result.message, 'error');
      }
    })
    .withFailureHandler(function(error) {
      showMessage(`ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
    })
    .cleanupMasterData(currentCategory);
}

// ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
function switchTab(tabName) {
  // ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–°
  document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
  event.target.classList.add('active');
  
  // ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
  document.querySelectorAll('.tab-content').forEach(content => content.style.display = 'none');
  document.getElementById(tabName + 'Tab').style.display = 'block';
}

// ç¾åœ¨ã®ã‚«ãƒ†ã‚´ãƒªãƒ‡ãƒ¼ã‚¿ã‚’å†èª­ã¿è¾¼ã¿
function refreshCurrentCategory() {
  if (currentCategory) {
    google.script.run
      .withSuccessHandler(function(result) {
        if (result.success) {
          currentMasterData = result.categories;
          populateCategorySelect();
          selectCategory(currentCategory);
        }
      })
      .withFailureHandler(function(error) {
        console.error('å†èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
      })
      .getMasterDataByCategory();
  }
}

// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
function showMessage(text, type) {
  const msgEl = document.getElementById('message');
  msgEl.textContent = text;
  msgEl.className = 'message';
  if (type) msgEl.classList.add(type);
  msgEl.style.display = text ? 'block' : 'none';
}

function hideMessage() {
  document.getElementById('message').style.display = 'none';
}

// HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

// åˆæœŸåŒ–å®Ÿè¡Œ
document.addEventListener('DOMContentLoaded', initialize);
</script>
</body>
</html>