<div class="group description-section">
  <div class="group-title">
    <span><span class="group-emoji">📝</span> 商品の説明</span>
  </div>

  <!-- 商品の説明欄（プレビュー） -->
  <div style="margin-bottom: 12px;">
    <label style="display: flex; justify-content: space-between; align-items: center;">
      <span>商品の説明</span>
      <span class="counter" id="descCounter">
        <span id="descCount">0</span>/<span id="descMax">1000</span> 文字
      </span>
    </label>
    <textarea
      id="商品の説明"
      placeholder="商品の状態・素材・サイズ感・ディテール・注意点などを記入してください"
      style="margin-top: 4px; min-height: 120px; resize: none;"
    ></textarea>
  </div>

  <!-- コピーボタン -->
  <div style="margin-bottom: 16px;">
    <button type="button" onclick="copyToClipboard('商品の説明', 'copyDescBtn')" id="copyDescBtn" style="width: 100%;">
      <span class="button-emoji">📋</span> 商品の説明をコピー
    </button>
  </div>

  <!-- ドラッグ可能なブロックコンテナ -->
  <div id="descriptionBlocksContainer">

  <!-- ブランド名セクション（条件付き表示） -->
  <div id="brandNameSection" class="form-section desc-draggable-block" data-block-type="brandName" style="margin-bottom: 12px; display: none;">
    <h3 class="section-title" style="display: flex; align-items: center;">
      <span class="drag-handle" style="cursor: move; margin-right: 8px; color: #9ca3af; font-size: 14px;">⋮⋮</span>
      <span class="section-icon">🏷️</span>ブランド名
      <button type="button" class="collapse-btn" onclick="toggleDescBlock(this)" style="margin-left: auto; background: none; border: none; cursor: pointer; font-size: 14px; color: #6b7280; padding: 0 8px;">▼</button>
    </h3>
    <div class="section-content">
      <div style="font-size: 11px; color: #6b7280; padding: 8px; background: #f9fafb; border-radius: 4px;">
        💡 基本情報で選択したブランド名が自動的にプレビューに表示されます。<br>
        このブロックの位置を変更することで、プレビュー内の表示位置を調整できます。
      </div>
    </div>
  </div>

  <!-- サイズ情報セクション -->
  <div id="sizeSection" class="form-section desc-draggable-block" data-block-type="size" style="margin-bottom: 12px; display: none;">
    <h3 class="section-title" style="display: flex; align-items: center;">
      <span class="drag-handle" style="cursor: move; margin-right: 8px; color: #9ca3af; font-size: 14px;">⋮⋮</span>
      <span class="section-icon" id="sizeIconDisplay">👕</span><span id="sizeLabelDisplay">サイズ</span>
      <button type="button" class="collapse-btn" onclick="toggleDescBlock(this)" style="margin-left: auto; background: none; border: none; cursor: pointer; font-size: 14px; color: #6b7280; padding: 0 8px;">▼</button>
    </h3>
    <div class="section-content">
      <!-- トップス/アウター用サイズ -->
      <div id="topsSize" style="display: none;">
        <!-- サイズ(表記) -->
        <div style="margin-bottom: 12px;">
          <label style="font-weight: 600; color: #374151; margin-bottom: 4px; display: block;">サイズ(表記)</label>
          <select id="サイズ(表記)_トップス" style="width: 100%;">
            <option value="">--</option>
          </select>
        </div>

        <!-- サイズ(実寸) -->
        <div style="margin-bottom: 8px;">
          <label style="font-weight: 600; color: #374151; margin-bottom: 4px; display: block;">サイズ(実寸)</label>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 4px;">
          <div>
            <label class="small" id="shoulderWidthLabel">肩幅</label>
            <div style="display: flex; align-items: center; gap: 4px;">
              <select id="肩幅" style="flex: 1;">
                <option value="">--</option>
              </select>
              <span style="font-size: 12px; color: #6b7280;">cm</span>
            </div>
          </div>
          <div>
            <label class="small">身幅</label>
            <div style="display: flex; align-items: center; gap: 4px;">
              <select id="身幅" style="flex: 1;">
                <option value="">--</option>
              </select>
              <span style="font-size: 12px; color: #6b7280;">cm</span>
            </div>
          </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
          <div>
            <label class="small">袖丈</label>
            <div style="display: flex; align-items: center; gap: 4px;">
              <select id="袖丈" style="flex: 1;">
                <option value="">--</option>
              </select>
              <span style="font-size: 12px; color: #6b7280;">cm</span>
            </div>
          </div>
          <div>
            <label class="small">着丈</label>
            <div style="display: flex; align-items: center; gap: 4px;">
              <select id="着丈" style="flex: 1;">
                <option value="">--</option>
              </select>
              <span style="font-size: 12px; color: #6b7280;">cm</span>
            </div>
          </div>
        </div>
      </div>

      <!-- パンツ用サイズ -->
      <div id="bottomsSize" style="display: none;">
        <!-- サイズ(表記) -->
        <div style="margin-bottom: 12px;">
          <label style="font-weight: 600; color: #374151; margin-bottom: 4px; display: block;">サイズ(表記)</label>
          <select id="サイズ(表記)_ボトムス" style="width: 100%;">
            <option value="">--</option>
          </select>
        </div>

        <!-- サイズ(実寸) -->
        <div style="margin-bottom: 8px;">
          <label style="font-weight: 600; color: #374151; margin-bottom: 4px; display: block;">サイズ(実寸)</label>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 4px;">
          <div>
            <label class="small">ウエスト</label>
            <div style="display: flex; align-items: center; gap: 4px;">
              <select id="ウエスト" style="flex: 1;">
                <option value="">--</option>
              </select>
              <span style="font-size: 12px; color: #6b7280;">cm</span>
            </div>
          </div>
          <div>
            <label class="small">ヒップ</label>
            <div style="display: flex; align-items: center; gap: 4px;">
              <select id="ヒップ" style="flex: 1;">
                <option value="">--</option>
              </select>
              <span style="font-size: 12px; color: #6b7280;">cm</span>
            </div>
          </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
          <div>
            <label class="small">股上</label>
            <div style="display: flex; align-items: center; gap: 4px;">
              <select id="股上" style="flex: 1;">
                <option value="">--</option>
              </select>
              <span style="font-size: 12px; color: #6b7280;">cm</span>
            </div>
          </div>
          <div>
            <label class="small">股下</label>
            <div style="display: flex; align-items: center; gap: 4px;">
              <select id="股下" style="flex: 1;">
                <option value="">--</option>
              </select>
              <span style="font-size: 12px; color: #6b7280;">cm</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- カラー(詳細)セクション -->
  <div class="form-section desc-draggable-block" data-block-type="color" style="margin-bottom: 12px;">
    <h3 class="section-title" style="display: flex; align-items: center;">
      <span class="drag-handle" style="cursor: move; margin-right: 8px; color: #9ca3af; font-size: 14px;">⋮⋮</span>
      <span class="section-icon">🎨</span>カラー(詳細)
      <button type="button" class="collapse-btn" onclick="toggleDescBlock(this)" style="margin-left: auto; background: none; border: none; cursor: pointer; font-size: 14px; color: #6b7280; padding: 0 8px;">▼</button>
    </h3>
    <div class="section-content">
      <div id="colorList">
        <!-- 初期表示は1セット -->
        <div class="color-item" data-index="1">
          <div class="color-header">
            <span>カラー 1</span>
            <button type="button" class="remove-color-btn" onclick="removeColor(1)" style="display:none;">削除</button>
          </div>

          <div class="color-fields">
            <label>色:
              <select id="カラー1" class="color-select">
                <option value="">--</option>
              </select>
            </label>
          </div>
        </div>
      </div>

      <button type="button" id="addColorBtn" class="add-color-btn">+ カラーを追加</button>
    </div>
  </div>

  <!-- 商品状態(詳細)セクション -->
  <div class="form-section desc-draggable-block" data-block-type="condition" style="margin-bottom: 12px;">
    <h3 class="section-title" style="display: flex; align-items: center;">
      <span class="drag-handle" style="cursor: move; margin-right: 8px; color: #9ca3af; font-size: 14px;">⋮⋮</span>
      <span class="section-icon">📋</span>商品状態(詳細)
      <button type="button" class="collapse-btn" onclick="toggleDescBlock(this)" style="margin-left: auto; background: none; border: none; cursor: pointer; font-size: 14px; color: #6b7280; padding: 0 8px;">▼</button>
    </h3>
    <div class="section-content">
      <!-- クイック挿入ボタン群 -->
      <div id="quickInsertButtonsContainer" class="quick-insert-buttons" style="margin-bottom: 8px;">
        <!-- ボタンは「商品の状態」に応じて動的に表示 -->
      </div>

      <!-- オートコンプリート対応のテキストエリア -->
      <div style="position: relative;">
        <textarea
          id="商品状態詳細"
          rows="3"
          placeholder="商品の詳細な状態を入力してください（傷、汚れ、使用感など）"
        ></textarea>
        <div id="suggest-商品状態詳細" class="suggest" hidden></div>
      </div>
    </div>
  </div>

  <!-- 素材入力セクション -->
  <div class="form-section desc-draggable-block" data-block-type="material" style="margin-bottom: 12px;">
    <h3 class="section-title" style="display: flex; align-items: center;">
      <span class="drag-handle" style="cursor: move; margin-right: 8px; color: #9ca3af; font-size: 14px;">⋮⋮</span>
      <span class="section-icon">🧵</span>素材
      <button type="button" class="collapse-btn" onclick="toggleDescBlock(this)" style="margin-left: auto; background: none; border: none; cursor: pointer; font-size: 14px; color: #6b7280; padding: 0 8px;">▼</button>
    </h3>
    <div class="section-content">
      <div id="materialList">
        <!-- 初期表示は1セット -->
        <div class="material-item" data-index="1">
          <div class="material-header">
            <span>素材 1</span>
            <button type="button" class="remove-material-btn" onclick="removeMaterial(1)"
style="display:none;">削除</button>
          </div>

          <div class="material-fields">
            <label>箇所:
              <select id="素材1_箇所" class="material-location">
                <option value="">--</option>
              </select>
            </label>

            <div class="material-composition">
              <div class="composition-row">
                <label>種類:
                  <select id="素材1_種類1" class="material-type">
                    <option value="">--</option>
                  </select>
                </label>
                <label>割合:
                  <select id="素材1_％1" class="material-percent">
                    <option value="">--%</option>
                  </select>
                </label>
              </div>

              <div class="composition-row">
                <label>種類:
                  <select id="素材1_種類2" class="material-type">
                    <option value="">--</option>
                  </select>
                </label>
                <label>割合:
                  <select id="素材1_％2" class="material-percent">
                    <option value="">--%</option>
                  </select>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <button type="button" id="addMaterialBtn" class="add-material-btn">+ 素材を追加</button>
    </div>
  </div>

  <!-- AI生成ブロック（完結版） -->
  <div class="form-section desc-draggable-block" data-block-type="aiGeneration" style="margin-bottom: 12px;">
    <h3 class="section-title" style="display: flex; align-items: center;">
      <span class="drag-handle" style="cursor: move; margin-right: 8px; color: #9ca3af; font-size: 14px;">⋮⋮</span>
      <span class="section-icon">✨</span>AI生成
      <button type="button" class="collapse-btn" onclick="toggleDescBlock(this)" style="margin-left: auto; background: none; border: none; cursor: pointer; font-size: 14px; color: #6b7280; padding: 0 8px;">▼</button>
    </h3>
    <div class="section-content">
      <!-- 説明文 -->
      <div style="font-size: 11px; color: #6b7280; margin-bottom: 12px; padding: 8px; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-radius: 6px; border-left: 3px solid #f59e0b;">
        <span class="info-emoji">💡</span> 以下の情報を入力してAI生成ボタンを押すと、魅力的な商品説明文が自動生成されます。
      </div>

      <!-- AI用商品属性 -->
      <div style="margin-bottom: 12px;">
        <label style="font-size: 13px; font-weight: 600; color: #374151; margin-bottom: 4px; display: block;">
          <span class="info-emoji">🏷️</span> 追加属性（任意）
        </label>
        <textarea
          id="AI用商品属性"
          rows="3"
          placeholder="商品の詳細な属性を入力してください（例: ヴィンテージ、90年代、USA製、希少、限定品、タグ付き、デッドストック）&#10;&#10;カンマ区切りで複数入力可能です。"
          style="width: 100%; padding: 10px; border: 2px solid #d1d5db; border-radius: 6px; font-size: 13px; font-family: inherit; resize: vertical;"
        ></textarea>
        <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">
          例: ヴィンテージ、90年代、USA製、希少、限定品
        </div>
      </div>

      <!-- 品番・型番入力 -->
      <div style="margin-bottom: 12px;">
        <label style="font-size: 13px; font-weight: 600; color: #374151; margin-bottom: 4px; display: block;">
          <span class="info-emoji">🔢</span> 品番・型番（任意）
        </label>
        <input
          type="text"
          id="品番型番"
          placeholder="例: 555088-101, DM0522-100, FW23-M001"
          style="width: 100%; padding: 10px; border: 2px solid #d1d5db; border-radius: 6px; font-size: 13px;"
        />
      </div>

      <!-- 画像アップロード -->
      <div style="margin-bottom: 12px;">
        <label style="font-size: 13px; font-weight: 600; color: #374151; margin-bottom: 4px; display: block;">
          <span class="info-emoji">📷</span> 商品画像（任意）
        </label>
        <div style="font-size: 11px; color: #6b7280; margin-bottom: 8px; padding: 6px 8px; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-radius: 4px; border-left: 3px solid #f59e0b;">
          <span class="info-emoji">💡</span> 画像をアップロードするとAIが解析してより詳細な説明文を生成します（最大3枚）
        </div>
        <input
          type="file"
          id="productImages"
          accept="image/*"
          multiple
          style="display: none;"
          onchange="handleImageUpload(event)"
        />
        <button
          type="button"
          onclick="document.getElementById('productImages').click()"
          style="padding: 10px 16px; background: #e0f2fe; border: 2px dashed #0ea5e9; border-radius: 6px; color: #0369a1; font-size: 13px; cursor: pointer; width: 100%; font-weight: 500;"
        >
          <span class="button-emoji">📷</span> 画像を選択
        </button>
        <!-- 画像プレビューエリア -->
        <div id="imagePreviewContainer" style="margin-top: 12px; display: none;">
          <div style="font-size: 12px; font-weight: 600; color: #374151; margin-bottom: 8px;">
            選択した画像（<span id="imageCount">0</span>/3）
          </div>
          <div id="imagePreviewList" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
            <!-- プレビュー画像がここに追加される -->
          </div>
        </div>
      </div>

      <!-- AI生成ボタン -->
      <div style="margin-bottom: 12px;">
        <button
          type="button"
          onclick="generateAiDescription()"
          id="aiGenBtn"
          style="width: 100%; padding: 12px 16px; background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%); border: none; border-radius: 6px; color: white; font-size: 14px; font-weight: 600; cursor: pointer; box-shadow: 0 2px 4px rgba(139, 92, 246, 0.3);"
        >
          <span class="button-emoji">✨</span> AI生成
        </button>
      </div>
    </div>
  </div>

  <!-- 割引情報選択（折りたたみ可能） -->
  <div class="form-section desc-draggable-block" data-block-type="discount" style="margin-bottom: 12px;">
    <h3 class="section-title" style="display: flex; align-items: center;">
      <span class="drag-handle" style="cursor: move; margin-right: 8px; color: #9ca3af; font-size: 14px;">⋮⋮</span>
      <span class="section-icon">💰</span>割引情報
      <button type="button" class="collapse-btn" onclick="toggleDescBlock(this)" style="margin-left: auto; background: none; border: none; cursor: pointer; font-size: 14px; color: #6b7280; padding: 0 8px;">▼</button>
    </h3>
    <div id="discountSection" class="section-content collapsible-content">
      <div id="discountCheckboxContainer" style="padding: 8px; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 6px;">
        <!-- 割引情報チェックボックスが動的に生成される -->
        <div style="font-size: 11px; color: #6b7280; text-align: center;">読み込み中...</div>
      </div>
    </div>
  </div>

  <!-- オリジナルハッシュタグ選択（折りたたみ可能） -->
  <div class="form-section desc-draggable-block" data-block-type="hashtag" style="margin-bottom: 12px;">
    <h3 class="section-title" style="display: flex; align-items: center;">
      <span class="drag-handle" style="cursor: move; margin-right: 8px; color: #9ca3af; font-size: 14px;">⋮⋮</span>
      <span class="section-icon">🏷️</span>オリジナルハッシュタグ
      <button type="button" class="collapse-btn" onclick="toggleDescBlock(this)" style="margin-left: auto; background: none; border: none; cursor: pointer; font-size: 14px; color: #6b7280; padding: 0 8px;">▼</button>
    </h3>
    <div id="hashtagSection" class="section-content collapsible-content">
      <div id="hashtagCheckboxContainer" style="padding: 8px; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 6px;">
        <!-- ハッシュタグチェックボックスが動的に生成される -->
        <div style="font-size: 11px; color: #6b7280; text-align: center;">読み込み中...</div>
      </div>
    </div>
  </div>

  </div><!-- /descriptionBlocksContainer -->

</div>
